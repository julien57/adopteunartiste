{% extends 'base_profil.html.twig' %}

{% block body %}
    <div class="profile-header">
        <!-- PROFILE HEADER COVER -->
        <figure class="profile-header-cover liquid">
            <img src="{% if userProfil.cover %}{{ asset( constant('App\\Services\\File\\UploadFile::COVERUPLOAD_DIR')) ~ userProfil.cover }}{% else %}{{ asset('img/cover/01.jpg') }}{% endif %}" alt="photo couverture {{ userProfil.pseudo }}">
        </figure>
        <!-- /PROFILE HEADER COVER -->

        <!-- PROFILE HEADER INFO -->
        <div class="profile-header-info">
            <!-- USER SHORT DESCRIPTION -->
            <div class="user-short-description big">
                <!-- USER SHORT DESCRIPTION AVATAR -->
                <a class="user-short-description-avatar user-avatar big" href="profile-timeline.html">
                    <!-- USER AVATAR BORDER -->
                    <div class="user-avatar-border">
                        <!-- HEXAGON -->
                        <div class="hexagon-148-164"></div>
                        <!-- /HEXAGON -->
                    </div>
                    <!-- /USER AVATAR BORDER -->

                    <!-- USER AVATAR CONTENT -->
                    <div class="user-avatar-content">
                        <!-- HEXAGON -->
                        <div class="hexagon-image-100-110" data-src="{% if userProfil.avatar %}{{ asset( constant('App\\Services\\File\\UploadFile::AVATAR_UPLOAD_DIR')) ~ userProfil.avatar }}{% else %}{{ asset('img/avatar/01.jpg') }}{% endif %}"></div>
                        <!-- /HEXAGON -->
                    </div>
                    <!-- /USER AVATAR CONTENT -->

                    <!-- USER AVATAR PROGRESS -->
                    <div class="user-avatar-progress">
                        <!-- HEXAGON -->
                        <div class="hexagon-progress-124-136"></div>
                        <!-- /HEXAGON -->
                    </div>
                    <!-- /USER AVATAR PROGRESS -->

                    <!-- USER AVATAR PROGRESS BORDER -->
                    <div class="user-avatar-progress-border">
                        <!-- HEXAGON -->
                        <div class="hexagon-border-124-136"></div>
                        <!-- /HEXAGON -->
                    </div>
                    <!-- /USER AVATAR PROGRESS BORDER -->

                    <!-- USER AVATAR BADGE -->
                    <div class="user-avatar-badge">
                        <!-- USER AVATAR BADGE BORDER -->
                        <div class="user-avatar-badge-border">
                            <!-- HEXAGON -->
                            <div class="hexagon-40-44"></div>
                            <!-- /HEXAGON -->
                        </div>
                        <!-- /USER AVATAR BADGE BORDER -->

                        <!-- USER AVATAR BADGE CONTENT -->
                        <div class="user-avatar-badge-content">
                            <!-- HEXAGON -->
                            <div class="hexagon-dark-32-34"></div>
                            <!-- /HEXAGON -->
                        </div>
                        <!-- /USER AVATAR BADGE CONTENT -->

                        <!-- USER AVATAR BADGE TEXT -->
                        <p class="user-avatar-badge-text">24</p>
                        <!-- /USER AVATAR BADGE TEXT -->
                    </div>
                    <!-- /USER AVATAR BADGE -->
                </a>
                <!-- /USER SHORT DESCRIPTION AVATAR -->

                <!-- USER SHORT DESCRIPTION AVATAR -->
                <a class="user-short-description-avatar user-short-description-avatar-mobile user-avatar medium" href="profile-timeline.html">
                    <!-- USER AVATAR BORDER -->
                    <div class="user-avatar-border">
                        <!-- HEXAGON -->
                        <div class="hexagon-120-132"></div>
                        <!-- /HEXAGON -->
                    </div>
                    <!-- /USER AVATAR BORDER -->

                    <!-- USER AVATAR CONTENT -->
                    <div class="user-avatar-content">
                        <!-- HEXAGON -->
                        <div class="hexagon-image-82-90" data-src="{% if userProfil.avatar %}{% else %}{{ asset('img/avatar/01.jpg') }}{% endif %}"></div>
                        <!-- /HEXAGON -->
                    </div>
                    <!-- /USER AVATAR CONTENT -->

                    <!-- USER AVATAR PROGRESS -->
                    <div class="user-avatar-progress">
                        <!-- HEXAGON -->
                        <div class="hexagon-progress-100-110"></div>
                        <!-- /HEXAGON -->
                    </div>
                    <!-- /USER AVATAR PROGRESS -->

                    <!-- USER AVATAR PROGRESS BORDER -->
                    <div class="user-avatar-progress-border">
                        <!-- HEXAGON -->
                        <div class="hexagon-border-100-110"></div>
                        <!-- /HEXAGON -->
                    </div>
                    <!-- /USER AVATAR PROGRESS BORDER -->

                    <!-- USER AVATAR BADGE -->
                    <div class="user-avatar-badge">
                        <!-- USER AVATAR BADGE BORDER -->
                        <div class="user-avatar-badge-border">
                            <!-- HEXAGON -->
                            <div class="hexagon-32-36"></div>
                            <!-- /HEXAGON -->
                        </div>
                        <!-- /USER AVATAR BADGE BORDER -->

                        <!-- USER AVATAR BADGE CONTENT -->
                        <div class="user-avatar-badge-content">
                            <!-- HEXAGON -->
                            <div class="hexagon-dark-26-28"></div>
                            <!-- /HEXAGON -->
                        </div>
                        <!-- /USER AVATAR BADGE CONTENT -->

                        <!-- USER AVATAR BADGE TEXT -->
                        <p class="user-avatar-badge-text">24</p>
                        <!-- /USER AVATAR BADGE TEXT -->
                    </div>
                    <!-- /USER AVATAR BADGE -->
                </a>
                <!-- /USER SHORT DESCRIPTION AVATAR -->

                <!-- USER SHORT DESCRIPTION TITLE -->
                <p class="user-short-description-title"><a href="profile-timeline.html">{{ userProfil.domainArtist.title }}</a></p>
                <!-- /USER SHORT DESCRIPTION TITLE -->

                <!-- USER SHORT DESCRIPTION TEXT -->
                <p class="user-short-description-text"><a href="{{ userProfil.website }}" target="_blank">{{ userProfil.website }}</a></p>
                <!-- /USER SHORT DESCRIPTION TEXT -->
            </div>
            <!-- /USER SHORT DESCRIPTION -->

            <!-- PROFILE HEADER SOCIAL LINKS WRAP -->
            <div class="profile-header-social-links-wrap">
                <!-- PROFILE HEADER SOCIAL LINKS -->
                <div id="profile-header-social-links-slider" class="profile-header-social-links">

                    {% if userProfil.facebook %}
                        <div class="profile-header-social-link">
                            <a class="social-link facebook" target="_blank" href="{{ userProfil.facebook }}">
                                <svg class="icon-facebook">
                                    <use xlink:href="#svg-facebook"></use>
                                </svg>
                            </a>
                        </div>
                    {% endif %}

                    {% if userProfil.twitter %}
                        <div class="profile-header-social-link">
                            <a class="social-link twitter" target="_blank"  href="{{ userProfil.twitter }}">
                                <svg class="icon-twitter">
                                    <use xlink:href="#svg-twitter"></use>
                                </svg>
                            </a>
                        </div>
                    {% endif %}

                    {% if userProfil.instagram %}
                        <div class="profile-header-social-link">
                            <a class="social-link instagram" target="_blank"  href="{{ userProfil.instagram }}">
                                <svg class="icon-instagram">
                                    <use xlink:href="#svg-instagram"></use>
                                </svg>
                            </a>
                        </div>
                    {% endif %}

                    {% if userProfil.twitch %}
                        <div class="profile-header-social-link">
                            <a class="social-link twitch" target="_blank"  href="{{ userProfil.twitch }}">
                                <svg class="icon-twitch">
                                    <use xlink:href="#svg-twitch"></use>
                                </svg>
                            </a>
                        </div>
                    {% endif %}

                    {% if userProfil.youtube %}
                        <div class="profile-header-social-link">
                            <a class="social-link youtube" href="{{ userProfil.youtube }}">
                                <svg class="icon-youtube">
                                    <use xlink:href="#svg-youtube"></use>
                                </svg>
                            </a>
                        </div>
                    {% endif %}
                </div>

            </div>

            <!-- USER STATS -->
            <div class="user-stats">
                <!-- USER STAT -->
                <div class="user-stat big">
                    <!-- USER STAT TITLE -->
                    <p class="user-stat-title" id="nb_published">{{ userProfil.posts|length }}</p>
                    <!-- /USER STAT TITLE -->

                    <!-- USER STAT TEXT -->
                    <p class="user-stat-text">publications</p>
                    <!-- /USER STAT TEXT -->
                </div>
                <!-- /USER STAT -->

                <!-- USER STAT -->
                <div class="user-stat big">
                    <!-- USER STAT TITLE -->
                    <p class="user-stat-title">{{ post_adopt.getAllAdoptUser(userProfil)|length }}</p>
                    <!-- /USER STAT TITLE -->

                    <!-- USER STAT TEXT -->
                    <p class="user-stat-text">Adoptés</p>
                    <!-- /USER STAT TEXT -->
                </div>
                <!-- /USER STAT -->

                <!-- USER STAT -->
                <div class="user-stat big">
                    <!-- USER STAT TITLE -->
                    <p class="user-stat-title">{{ userProfil.nbVisit }}</p>
                    <!-- /USER STAT TITLE -->

                    <!-- USER STAT TEXT -->
                    <p class="user-stat-text">vues</p>
                    <!-- /USER STAT TEXT -->
                </div>
                <!-- /USER STAT -->

                <!-- USER STAT -->
                <div class="user-stat big">
                    <!-- USER STAT IMAGE -->
                    <img class="user-stat-image" src="{{ asset('img/flag/usa.png') }}" alt="flag-usa">
                    <!-- /USER STAT IMAGE -->

                    <!-- USER STAT TEXT -->
                    <p class="user-stat-text">usa</p>
                    <!-- /USER STAT TEXT -->
                </div>
                <!-- /USER STAT -->
            </div>
            <!-- /USER STATS -->

            {% if app.user != userProfil %}
                <!-- PROFILE HEADER INFO ACTIONS -->
                <div class="profile-header-info-actions">
                    <!-- PROFILE HEADER INFO ACTION -->
                    <button class="profile-header-info-action button secondary" id="btn_adopt">{% if post_adopt.getAdoptAxist(userProfil, app.user) %}Abandonner{% else %}Adopter{% endif %}</button>
                    <!-- /PROFILE HEADER INFO ACTION -->

                    <!-- PROFILE HEADER INFO ACTION -->
                    <button class="profile-header-info-action button primary"><span class="hide-text-mobile">Send</span> Message</button>
                    <!-- /PROFILE HEADER INFO ACTION -->
                </div>
            {% endif %}
            <!-- /PROFILE HEADER INFO ACTIONS -->
        </div>
        <!-- /PROFILE HEADER INFO -->
    </div>
    <!-- /PROFILE HEADER -->

    <!-- SECTION NAVIGATION -->
    <nav class="section-navigation">
        <!-- SECTION MENU -->
        <div id="section-navigation-slider" class="section-menu">
            <!-- SECTION MENU ITEM -->
            <a class="section-menu-item" href="profile-about.html">
                <!-- SECTION MENU ITEM ICON -->
                <svg class="section-menu-item-icon icon-profile">
                    <use xlink:href="#svg-profile"></use>
                </svg>
                <!-- /SECTION MENU ITEM ICON -->

                <!-- SECTION MENU ITEM TEXT -->
                <p class="section-menu-item-text">About</p>
                <!-- /SECTION MENU ITEM TEXT -->
            </a>
            <!-- /SECTION MENU ITEM -->

            <!-- SECTION MENU ITEM -->
            <a class="section-menu-item" href="{{ path('front_profil_user', {'pseudo': userProfil.pseudo}) }}">
                <!-- SECTION MENU ITEM ICON -->
                <svg class="section-menu-item-icon icon-timeline">
                    <use xlink:href="#svg-timeline"></use>
                </svg>
                <!-- /SECTION MENU ITEM ICON -->

                <!-- SECTION MENU ITEM TEXT -->
                <p class="section-menu-item-text">Timeline</p>
                <!-- /SECTION MENU ITEM TEXT -->
            </a>
            <!-- /SECTION MENU ITEM -->

            <!-- SECTION MENU ITEM -->
            <a class="section-menu-item" href="{{ path('front_profile_adopt_list', {'pseudo': userProfil.pseudo}) }}">
                <!-- SECTION MENU ITEM ICON -->
                <svg class="section-menu-item-icon icon-friend">
                    <use xlink:href="#svg-friend"></use>
                </svg>
                <!-- /SECTION MENU ITEM ICON -->

                <!-- SECTION MENU ITEM TEXT -->
                <p class="section-menu-item-text">Adoptions</p>
                <!-- /SECTION MENU ITEM TEXT -->
            </a>

            <!-- SECTION MENU ITEM -->
            <a class="section-menu-item active" href="{{ path('front_profile_photos', {'pseudo': userProfil.pseudo}) }}">
                <!-- SECTION MENU ITEM ICON -->
                <svg class="section-menu-item-icon icon-photos">
                    <use xlink:href="#svg-photos"></use>
                </svg>
                <!-- /SECTION MENU ITEM ICON -->

                <!-- SECTION MENU ITEM TEXT -->
                <p class="section-menu-item-text">Photos</p>
                <!-- /SECTION MENU ITEM TEXT -->
            </a>
            <!-- /SECTION MENU ITEM -->

            <!-- SECTION MENU ITEM -->
            <a class="section-menu-item" href="{{ path('front_profil_blog_list', {'pseudo': userProfil.pseudo}) }}">
                <!-- SECTION MENU ITEM ICON -->
                <svg class="section-menu-item-icon icon-blog-posts">
                    <use xlink:href="#svg-blog-posts"></use>
                </svg>
                <!-- /SECTION MENU ITEM ICON -->

                <!-- SECTION MENU ITEM TEXT -->
                <p class="section-menu-item-text">Blog</p>
                <!-- /SECTION MENU ITEM TEXT -->
            </a>
            <!-- /SECTION MENU ITEM -->

            <!-- SECTION MENU ITEM -->
            <a class="section-menu-item" href="profile-store.html">
                <!-- SECTION MENU ITEM ICON -->
                <svg class="section-menu-item-icon icon-store">
                    <use xlink:href="#svg-store"></use>
                </svg>
                <!-- /SECTION MENU ITEM ICON -->

                <!-- SECTION MENU ITEM TEXT -->
                <p class="section-menu-item-text">Store</p>
                <!-- /SECTION MENU ITEM TEXT -->
            </a>
            <!-- /SECTION MENU ITEM -->
        </div>
        <!-- /SECTION MENU -->

        <!-- SLIDER CONTROLS -->
        <div id="section-navigation-slider-controls" class="slider-controls">
            <!-- SLIDER CONTROL -->
            <div class="slider-control left">
                <!-- SLIDER CONTROL ICON -->
                <svg class="slider-control-icon icon-small-arrow">
                    <use xlink:href="#svg-small-arrow"></use>
                </svg>
                <!-- /SLIDER CONTROL ICON -->
            </div>
            <!-- /SLIDER CONTROL -->

            <!-- SLIDER CONTROL -->
            <div class="slider-control right">
                <!-- SLIDER CONTROL ICON -->
                <svg class="slider-control-icon icon-small-arrow">
                    <use xlink:href="#svg-small-arrow"></use>
                </svg>
                <!-- /SLIDER CONTROL ICON -->
            </div>
            <!-- /SLIDER CONTROL -->
        </div>
        <!-- /SLIDER CONTROLS -->
    </nav>
    <!-- /SECTION NAVIGATION -->

    <!-- GRID -->
    <section class="section">
        <!-- SECTION HEADER -->
        <div class="section-header">
            <!-- SECTION HEADER INFO -->
            <div class="section-header-info">
                <!-- SECTION TITLE -->
                <h2 class="section-title">Photos <span class="highlighted">{{ countPhotos }}</span></h2>
                <!-- /SECTION TITLE -->
            </div>
            <!-- /SECTION HEADER INFO -->
        </div>
        <!-- /SECTION HEADER -->

        <!-- GRID -->
        <div class="grid grid-2-2-2-2-2-2 centered">

            {% for photo in photos %}
                <div class="photo-preview small popup-picture-trigger photo-post" data-post="{{ photo.post.id }}">
                <!-- PHOTO PREVIEW IMAGE -->
                <figure class="photo-preview-image liquid">
                    <img src="{{ asset( constant('App\\Services\\File\\UploadFile::PHOTO_POST_UPLOAD_DIR')) ~ photo.url }}" alt="{{ photo.url }}">
                </figure>
                <!-- /PHOTO PREVIEW IMAGE -->

                <!-- PHOTO PREVIEW INFO -->
                <div class="photo-preview-info">
                    <!-- REACTION COUNT LIST -->
                    <div class="reaction-count-list">
                        <!-- REACTION COUNT -->
                        <div class="reaction-count negative">
                            <!-- REACTION COUNT ICON -->
                            <svg class="reaction-count-icon icon-thumbs-up">
                                <use xlink:href="#svg-thumbs-up"></use>
                            </svg>
                            <!-- /REACTION COUNT ICON -->

                            <!-- REACTION COUNT TEXT -->
                            <p class="reaction-count-text">{{ photo.post.reacts|length }}</p>
                            <!-- /REACTION COUNT TEXT -->
                        </div>
                        <!-- /REACTION COUNT -->

                        <!-- REACTION COUNT -->
                        <div class="reaction-count negative">
                            <!-- REACTION COUNT ICON -->
                            <svg class="reaction-count-icon icon-comment">
                                <use xlink:href="#svg-comment"></use>
                            </svg>
                            <!-- /REACTION COUNT ICON -->

                            <!-- REACTION COUNT TEXT -->
                            <p class="reaction-count-text">{{ photo.post.commentPosts|length }}</p>
                            <!-- /REACTION COUNT TEXT -->
                        </div>
                        <!-- /REACTION COUNT -->
                    </div>
                    <!-- /REACTION COUNT LIST -->
                </div>
                <!-- /PHOTO PREVIEW INFO -->
            </div>
            {% else %}
                <p>Aucune photo ajoutée</p>
            {% endfor %}

        </div>
        {% if photos|length > 18 %}
            <div class="section-pager-bar pagintion pt-2" id="pagination">
                {{ knp_pagination_render(photos) }}
            </div>
        {% endif %}
    </section>
{% endblock %}

{% block javascript %}
{{ parent() }}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.js"></script>
<script>
let photoPost = document.querySelectorAll('.photo-post');

photoPost.forEach(function(post) {

  $(post).off().on('click', function() {
    let postId = null;
    postId = post.getAttribute('data-post');

    const data = {
          postId: postId
      };

    let datas = new FormData();
    datas.append("data", JSON.stringify(data));

    async function loadPicture() {
        let loading = document.getElementById('load-bar-picture');
        loading.style.display = 'inline-flex';
        loading.style.position = 'fixed';
        loading.style.top = '50%';
        loading.style.left = '50%';
        loading.style.zIndex = '999999';

         await fetch("{{ path('front_fil_get_picture') }}", { method: 'POST', body: datas})
    .then(response => response.json())
    .then(data => {

        loading.style.display = 'none';
        document.getElementById('cover_picture').src = '/img/upload/posts/'+data.post[0].photo[0].url;
        document.getElementById('post_text').textContent = data.post[0].text;
        document.getElementById('count_comment_post').textContent = data.comments.length+' commentaires';

        let datePost = new Date(data.post[0].publishedAt);

        document.getElementById('time_to_post').textContent = `il y a ${datePost.getHours()}h`;

        document.getElementById('link_user').textContent = data.post[0].user.pseudo;
        document.getElementById('link_user').href = `/profil/${data.post[0].user.pseudo}`;

        document.getElementById('list_react_post').innerHTML = '';
        let countReactions = 0;
        for (const react of data.reacts) {
            countReactions++;
            const reactHtml = `<div class="reaction-item">
                                        <img class="reaction-image reaction-item-dropdown-trigger" src="/img/reaction/${react.type}.png" alt="reaction-${react.type}">
                                        <div class="simple-dropdown padded reaction-item-dropdown">
                                            <p class="simple-dropdown-text"><img class="reaction" src="/img/reaction/${react.type}.png" alt="reaction-love"> <span class="bold">${react.type}</span></p>
                                            <p class="simple-dropdown-text" id="count_react">${react.count}</p>
                                        </div>
                                    </div>`;

            document.getElementById('list_react_post').innerHTML = reactHtml;

            app.plugins.createDropdown({
              trigger: '.reaction-item-dropdown-trigger',
              container: '.reaction-item-dropdown',
              triggerEvent: 'hover',
              offset: {
                bottom: 38,
                left: -16
              },
              animation: {
                type: 'translate-bottom',
                speed: .3,
                translateOffset: {
                  vertical: 20
                }
              }
            });
        }

        document.getElementById('count_reactions').textContent = countReactions;
        document.getElementById('comment_list_post').innerHTML = '';

        for (const comment of data.comments) {

            const htmlComment = `<div class="post-comment">
                <a class="user-avatar small no-outline" href="/profil/${comment.user.pseudo}">
                    <div class="user-avatar-content">
                        <div class="hexagon-image-30-32" data-src="/{{ constant('App\\Services\\File\\UploadFile::AVATAR_UPLOAD_DIR') }}${comment.user.avatar ? comment.user.avatar : 'img/avatar/01.jpg'}"></div>
                    </div>
                    <div class="user-avatar-progress">
                        <div class="hexagon-progress-40-44"></div>
                    </div>
                    <div class="user-avatar-progress-border">
                        <div class="hexagon-border-40-44"></div>
                    </div>
                    <div class="user-avatar-badge">
                        <div class="user-avatar-badge-border">
                            <div class="hexagon-22-24"></div>
                        </div>
                        <div class="user-avatar-badge-content">
                            <div class="hexagon-dark-16-18"></div>
                        </div>
                        <p class="user-avatar-badge-text">12</p>
                    </div>
                </a>
                <p class="post-comment-text"><a class="post-comment-text-author" href="profile-timeline.html">${comment.user.pseudo}</a>${comment.text}</p>
            </div>`;

            document.getElementById('comment_list_post').insertAdjacentHTML('beforeend', htmlComment);

            app.plugins.createHexagon({
              container: '.hexagon-148-164',
              width: 148,
              height: 164,
              roundedCorners: true,
              fill: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-progress-124-136',
              width: 124,
              height: 136,
              lineWidth: 8,
              roundedCorners: true,
              gradient: {
                colors: ['#41efff', '#615dfa']
              },
              scale: {
                start: 0,
                end: 1,
                stop: .74
              }
            });

            app.plugins.createHexagon({
              container: '.hexagon-border-124-136',
              width: 124,
              height: 136,
              lineWidth: 8,
              roundedCorners: true,
              lineColor: '#e7e8ee'
            });

            app.plugins.createHexagon({
              container: '.hexagon-image-100-110',
              width: 100,
              height: 110,
              roundedCorners: true,
              clip: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-120-132',
              width: 120,
              height: 132,
              roundedCorners: true,
              fill: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-progress-100-110',
              width: 100,
              height: 110,
              lineWidth: 6,
              roundedCorners: true,
              gradient: {
                colors: ['#41efff', '#615dfa']
              },
              scale: {
                start: 0,
                end: 1,
                stop: .8
              }
            });

            app.plugins.createHexagon({
              container: '.hexagon-border-100-110',
              width: 100,
              height: 110,
              lineWidth: 6,
              roundedCorners: true,
              lineColor: '#e7e8ee'
            });

            app.plugins.createHexagon({
              container: '.hexagon-image-82-90',
              width: 82,
              height: 90,
              roundedCorners: true,
              roundedCornerRadius: 3,
              clip: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-100-110',
              width: 100,
              height: 110,
              roundedCorners: true,
              fill: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-progress-84-92',
              width: 84,
              height: 92,
              lineWidth: 5,
              roundedCorners: true,
              roundedCornerRadius: 3,
              gradient: {
                colors: ['#41efff', '#615dfa']
              },
              scale: {
                start: 0,
                end: 1,
                stop: .8
              }
            });

            app.plugins.createHexagon({
              container: '.hexagon-border-84-92',
              width: 84,
              height: 92,
              lineWidth: 5,
              roundedCorners: true,
              roundedCornerRadius: 3,
              lineColor: '#e7e8ee'
            });

            app.plugins.createHexagon({
              container: '.hexagon-image-68-74',
              width: 68,
              height: 74,
              roundedCorners: true,
              roundedCornerRadius: 3,
              clip: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-50-56',
              width: 50,
              height: 56,
              roundedCorners: true,
              roundedCornerRadius: 2,
              fill: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-progress-40-44',
              width: 40,
              height: 44,
              lineWidth: 3,
              roundedCorners: true,
              roundedCornerRadius: 1,
              gradient: {
                colors: ['#41efff', '#615dfa']
              },
              scale: {
                start: 0,
                end: 1,
                stop: .8
              }
            });

            app.plugins.createHexagon({
              container: '.hexagon-border-40-44',
              width: 40,
              height: 44,
              lineWidth: 3,
              roundedCorners: true,
              roundedCornerRadius: 1,
              lineColor: '#e7e8ee'
            });

            app.plugins.createHexagon({
              container: '.hexagon-image-30-32',
              width: 30,
              height: 32,
              roundedCorners: true,
              roundedCornerRadius: 1,
              clip: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-40-44',
              width: 40,
              height: 44,
              roundedCorners: true,
              roundedCornerRadius: 1,
              fill: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-dark-32-34',
              width: 32,
              height: 34,
              roundedCorners: true,
              roundedCornerRadius: 1,
              lineColor: '#45437f',
              fill: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-32-36',
              width: 32,
              height: 36,
              roundedCorners: true,
              roundedCornerRadius: 1,
              lineColor: '#fff',
              fill: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-dark-26-28',
              width: 26,
              height: 28,
              roundedCorners: true,
              roundedCornerRadius: 1,
              lineColor: '#45437f',
              fill: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-28-32',
              width: 28,
              height: 32,
              roundedCorners: true,
              roundedCornerRadius: 1,
              lineColor: '#fff',
              fill: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-dark-22-24',
              width: 22,
              height: 24,
              roundedCorners: true,
              roundedCornerRadius: 1,
              lineColor: '#45437f',
              fill: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-22-24',
              width: 22,
              height: 24,
              roundedCorners: true,
              roundedCornerRadius: 1,
              lineColor: '#fff',
              fill: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-dark-16-18',
              width: 16,
              height: 18,
              roundedCorners: true,
              roundedCornerRadius: 1,
              lineColor: '#45437f',
              fill: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-120-130',
              width: 120,
              height: 130,
              roundedCorners: true,
              fill: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-100-108',
              width: 100,
              height: 108,
              roundedCorners: true,
              fill: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-image-124-136',
              width: 124,
              height: 136,
              roundedCorners: true,
              clip: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-image-84-92',
              width: 84,
              height: 92,
              roundedCorners: true,
              clip: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-34-36',
              width: 34,
              height: 36,
              roundedCorners: true,
              roundedCornerRadius: 1,
              fill: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-image-40-44',
              width: 40,
              height: 44,
              roundedCorners: true,
              roundedCornerRadius: 1,
              clip: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-image-24-26',
              width: 24,
              height: 26,
              roundedCorners: true,
              roundedCornerRadius: 1,
              clip: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-image-18-20',
              width: 18,
              height: 20,
              roundedCorners: true,
              roundedCornerRadius: 1,
              clip: true
            });

            app.plugins.createHexagon({
              container: '.hexagon-overlay-30-32',
              width: 30,
              height: 32,
              roundedCorners: true,
              roundedCornerRadius: 1,
              lineColor: 'rgba(97, 93, 250, .9)',
              fill: true
            });
        }

        var links = document.getElementsByClassName('reacting-picture');

        // For each <li> inside #links
        for (var i = 0; i < links.length; i++) {
            var link = links[i];
            link.addEventListener('click', (e) => {
                let reactIcon = e.target.parentNode;

                const dataPostId = postId;
                const dataReact = reactIcon.getAttribute('data-react');
                const data = {
                    postId: dataPostId,
                    userId: "{{ app.user.id }}",
                    react: dataReact
                };

                let datas = new FormData();
                datas.append("data", JSON.stringify(data));

                fetch("{{ path('front_react_post_add') }}", { method: 'POST', body: datas })
                    .then(response => response.json())
                    .then(data => {

                        const postId = document.getElementById(`like-picture`);
                        postId.style.fill = '#23d2e2';

                        const reactId = document.getElementById(`list_react_post`);
                        reactId.innerHTML = data.react.content;

                        app.plugins.createDropdown({
                            trigger: '.reaction-item-dropdown-trigger',
                            container: '.reaction-item-dropdown',
                            triggerEvent: 'hover',
                            offset: {
                                bottom: 38,
                                left: -16
                            },
                            animation: {
                                type: 'translate-bottom',
                                speed: .3,
                                translateOffset: {
                                    vertical: 20
                                }
                            }
                        });

                        app.plugins.createDropdown({
                            trigger: '.reaction-options-dropdown-trigger',
                            container: '.reaction-options-dropdown',
                            triggerEvent: 'click',
                            offset: {
                                bottom: 54,
                                left: -16
                            },
                            animation: {
                                type: 'translate-bottom',
                                speed: .3,
                                translateOffset: {
                                    vertical: 20
                                }
                            },
                            closeOnDropdownClick: true
                        });

                        app.plugins.createDropdown({
                            trigger: '.reaction-options-small-dropdown-trigger',
                            container: '.reaction-options-small-dropdown',
                            triggerEvent: 'click',
                            offset: {
                                bottom: 30,
                                left: -80
                            },
                            animation: {
                                type: 'translate-bottom',
                                speed: .3,
                                translateOffset: {
                                    vertical: 16
                                }
                            },
                            closeOnDropdownClick: true
                        });
                    });
            });
        }

        const commentForm = document.getElementById('form_comment_response');
            commentForm.addEventListener('submit', function(e) {
              e.preventDefault();
              e.stopImmediatePropagation();

              let form = e.target;
              const formData = new FormData(form);

              formData.append('postId', postId);

              fetch("{{ path('front_fil_add_comment') }}", { method: "POST", body: formData })
                .then(response => response.json())
                .then(data => {

                    if (data.message === 'ok') {
                        document.getElementById('comment_list_post').insertAdjacentHTML('afterbegin', data.comment.content);
                        document.getElementById('popup-post-reply').value = '';

                        app.plugins.createHexagon({
                          container: '.hexagon-148-164',
                          width: 148,
                          height: 164,
                          roundedCorners: true,
                          fill: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-progress-124-136',
                          width: 124,
                          height: 136,
                          lineWidth: 8,
                          roundedCorners: true,
                          gradient: {
                            colors: ['#41efff', '#615dfa']
                          },
                          scale: {
                            start: 0,
                            end: 1,
                            stop: .74
                          }
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-border-124-136',
                          width: 124,
                          height: 136,
                          lineWidth: 8,
                          roundedCorners: true,
                          lineColor: '#e7e8ee'
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-image-100-110',
                          width: 100,
                          height: 110,
                          roundedCorners: true,
                          clip: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-120-132',
                          width: 120,
                          height: 132,
                          roundedCorners: true,
                          fill: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-progress-100-110',
                          width: 100,
                          height: 110,
                          lineWidth: 6,
                          roundedCorners: true,
                          gradient: {
                            colors: ['#41efff', '#615dfa']
                          },
                          scale: {
                            start: 0,
                            end: 1,
                            stop: .8
                          }
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-border-100-110',
                          width: 100,
                          height: 110,
                          lineWidth: 6,
                          roundedCorners: true,
                          lineColor: '#e7e8ee'
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-image-82-90',
                          width: 82,
                          height: 90,
                          roundedCorners: true,
                          roundedCornerRadius: 3,
                          clip: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-100-110',
                          width: 100,
                          height: 110,
                          roundedCorners: true,
                          fill: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-progress-84-92',
                          width: 84,
                          height: 92,
                          lineWidth: 5,
                          roundedCorners: true,
                          roundedCornerRadius: 3,
                          gradient: {
                            colors: ['#41efff', '#615dfa']
                          },
                          scale: {
                            start: 0,
                            end: 1,
                            stop: .8
                          }
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-border-84-92',
                          width: 84,
                          height: 92,
                          lineWidth: 5,
                          roundedCorners: true,
                          roundedCornerRadius: 3,
                          lineColor: '#e7e8ee'
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-image-68-74',
                          width: 68,
                          height: 74,
                          roundedCorners: true,
                          roundedCornerRadius: 3,
                          clip: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-50-56',
                          width: 50,
                          height: 56,
                          roundedCorners: true,
                          roundedCornerRadius: 2,
                          fill: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-progress-40-44',
                          width: 40,
                          height: 44,
                          lineWidth: 3,
                          roundedCorners: true,
                          roundedCornerRadius: 1,
                          gradient: {
                            colors: ['#41efff', '#615dfa']
                          },
                          scale: {
                            start: 0,
                            end: 1,
                            stop: .8
                          }
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-border-40-44',
                          width: 40,
                          height: 44,
                          lineWidth: 3,
                          roundedCorners: true,
                          roundedCornerRadius: 1,
                          lineColor: '#e7e8ee'
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-image-30-32',
                          width: 30,
                          height: 32,
                          roundedCorners: true,
                          roundedCornerRadius: 1,
                          clip: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-40-44',
                          width: 40,
                          height: 44,
                          roundedCorners: true,
                          roundedCornerRadius: 1,
                          fill: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-dark-32-34',
                          width: 32,
                          height: 34,
                          roundedCorners: true,
                          roundedCornerRadius: 1,
                          lineColor: '#45437f',
                          fill: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-32-36',
                          width: 32,
                          height: 36,
                          roundedCorners: true,
                          roundedCornerRadius: 1,
                          lineColor: '#fff',
                          fill: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-dark-26-28',
                          width: 26,
                          height: 28,
                          roundedCorners: true,
                          roundedCornerRadius: 1,
                          lineColor: '#45437f',
                          fill: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-28-32',
                          width: 28,
                          height: 32,
                          roundedCorners: true,
                          roundedCornerRadius: 1,
                          lineColor: '#fff',
                          fill: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-dark-22-24',
                          width: 22,
                          height: 24,
                          roundedCorners: true,
                          roundedCornerRadius: 1,
                          lineColor: '#45437f',
                          fill: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-22-24',
                          width: 22,
                          height: 24,
                          roundedCorners: true,
                          roundedCornerRadius: 1,
                          lineColor: '#fff',
                          fill: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-dark-16-18',
                          width: 16,
                          height: 18,
                          roundedCorners: true,
                          roundedCornerRadius: 1,
                          lineColor: '#45437f',
                          fill: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-120-130',
                          width: 120,
                          height: 130,
                          roundedCorners: true,
                          fill: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-100-108',
                          width: 100,
                          height: 108,
                          roundedCorners: true,
                          fill: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-image-124-136',
                          width: 124,
                          height: 136,
                          roundedCorners: true,
                          clip: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-image-84-92',
                          width: 84,
                          height: 92,
                          roundedCorners: true,
                          clip: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-34-36',
                          width: 34,
                          height: 36,
                          roundedCorners: true,
                          roundedCornerRadius: 1,
                          fill: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-image-40-44',
                          width: 40,
                          height: 44,
                          roundedCorners: true,
                          roundedCornerRadius: 1,
                          clip: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-image-24-26',
                          width: 24,
                          height: 26,
                          roundedCorners: true,
                          roundedCornerRadius: 1,
                          clip: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-image-18-20',
                          width: 18,
                          height: 20,
                          roundedCorners: true,
                          roundedCornerRadius: 1,
                          clip: true
                        });

                        app.plugins.createHexagon({
                          container: '.hexagon-overlay-30-32',
                          width: 30,
                          height: 32,
                          roundedCorners: true,
                          roundedCornerRadius: 1,
                          lineColor: 'rgba(97, 93, 250, .9)',
                          fill: true
                        });
                                }
                            });
                          return false;
                        })
    });
    }
    loadPicture();
  })
})
</script>
{% endblock %}
